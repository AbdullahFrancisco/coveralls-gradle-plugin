
apply plugin: 'groovy'
apply plugin: 'maven'
apply plugin: 'eclipse'
apply plugin: 'idea'
apply plugin: 'cobertura'

repositories {
    mavenCentral()
}

dependencies {
    compile localGroovy()
    compile gradleApi()

    compile 'org.codehaus.groovy.modules.http-builder:http-builder:0.5.0-RC2'
    compile 'org.apache.httpcomponents:httpmime:4.3'

    testCompile 'junit:junit:4.11'
    testCompile 'org.mockito:mockito-all:1.9.5'
    testCompile 'com.github.tomakehurst:wiremock:1.18'
}

buildscript {
    repositories {
        mavenCentral()

        maven {
            url 'http://kt3k.github.io/repository/maven/release'
        }
    }

    dependencies {
        classpath 'net.saliman:gradle-cobertura-plugin:2.0.0'
    }
}


uploadArchives {
    repositories {
        mavenDeployer {
            repository url: 'file://' + System.getenv('LOCAL_MVN_REPO')
        }
    }
}

cobertura.coverageFormats = ['html', 'xml']
cobertura.coverageSourceDirs = sourceSets.main.groovy.srcDirs
